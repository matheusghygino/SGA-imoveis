import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as c}from"./index.BVOCwoKb.js";import f from"./ImovelCard._kOKuYLo.js";function L({filters:o,setFilters:s,aplicarFiltros:u}){const a=i=>{const{name:r,value:d}=i.target;s(p=>({...p,[r]:d}))};return e.jsxs("div",{className:"space-y-4 p-4 bg-gray-100 rounded-lg shadow",children:[e.jsx("input",{type:"text",name:"nome",placeholder:"Buscar por nome...",value:o.nome,onChange:a,className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("input",{type:"text",name:"cidade",placeholder:"Cidade",value:o.cidade,onChange:a,className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("input",{type:"text",name:"estado",placeholder:"Estado",value:o.estado,onChange:a,className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("input",{type:"text",name:"bairro",placeholder:"Bairro",value:o.bairro,onChange:a,className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("input",{type:"number",name:"quartos",placeholder:"Min. Quartos",value:o.quartos,onChange:a,className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("input",{type:"number",name:"banheiros",placeholder:"Min. Banheiros",value:o.banheiros,onChange:a,className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("input",{type:"number",name:"vagas",placeholder:"Min. Vagas",value:o.vagas,onChange:a,className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("input",{type:"number",name:"precoMin",placeholder:"Preço Mínimo",value:o.precoMin,onChange:a,className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("input",{type:"number",name:"precoMax",placeholder:"Preço Máximo",value:o.precoMax,onChange:a,className:"w-full p-2 border border-gray-300 rounded"}),e.jsxs("select",{name:"categoria",value:o.categoria,onChange:a,className:"w-full p-2 border border-gray-300 rounded",children:[e.jsx("option",{value:"",children:"Todas as Categorias"}),e.jsx("option",{value:"Apartamento",children:"Apartamento"}),e.jsx("option",{value:"Casa",children:"Casa"}),e.jsx("option",{value:"Chácara",children:"Chácara"}),e.jsx("option",{value:"Sítio",children:"Sítio"}),e.jsx("option",{value:"Lançamento",children:"Lançamento"})]}),e.jsx("button",{onClick:u,className:"bg-blue-600 text-white px-4 py-2 rounded w-full",children:"Filtrar"})]})}function F({imoveis:o}){return e.jsx("div",{className:"grid md:grid-cols-2 gap-8 pt-8",children:o.length===0?e.jsx("p",{className:"text-gray-500",children:"Nenhum imóvel encontrado com os filtros aplicados."}):o.map(s=>e.jsx(f,{imovel:s},s.slug))})}function E({imoveis:o}){const[s,u]=c.useState(o),[a,i]=c.useState({nome:"",cidade:"",estado:"",bairro:"",quartos:"",banheiros:"",vagas:"",precoMin:"",precoMax:"",categoria:""}),[r,d]=c.useState(null);c.useEffect(()=>{const l=new URLSearchParams(window.location.search).get("categoria"),n=l?l.split(",").map(t=>t.trim().toLowerCase()).join(","):"";i(t=>({...t,categoria:n})),d({cidade:"",estado:"",bairro:"",quartos:"",banheiros:"",vagas:"",precoMin:"",precoMax:"",categoria:n})},[]);const p=()=>{d({cidade:a.cidade,estado:a.estado,bairro:a.bairro,quartos:a.quartos,banheiros:a.banheiros,vagas:a.vagas,precoMin:a.precoMin,precoMax:a.precoMax,categoria:a.categoria})};return c.useEffect(()=>{if(!r)return;const m=r.categoria?r.categoria.split(",").map(n=>n.trim().toLowerCase()):[],l=o.filter(n=>{const t=n.data,h=a.nome?t.title.toLowerCase().includes(a.nome.toLowerCase()):!0,b=r.cidade?t.city?.toLowerCase()===r.cidade.toLowerCase():!0,x=r.estado?t.state?.toLowerCase()===r.estado.toLowerCase():!0,v=r.bairro?t.bairro?.toLowerCase().includes(r.bairro.toLowerCase()):!0,C=r.quartos?Number(t.bedrooms)>=Number(r.quartos):!0,j=r.banheiros?Number(t.bathrooms||0)>=Number(r.banheiros):!0,w=r.vagas?Number(t.parking||0)>=Number(r.vagas):!0,g=parseFloat(t.price.replace(/[^0-9.-]+/g,""))||0,N=r.precoMin?g>=parseFloat(r.precoMin):!0,y=r.precoMax?g<=parseFloat(r.precoMax):!0,M=m.length>0?m.includes(t.categoria?.toLowerCase()):!0;return h&&b&&x&&v&&C&&j&&w&&N&&y&&M});u(l)},[a.nome,r,o]),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsx("main",{className:"md:col-span-3",children:e.jsx(F,{imoveis:s})}),e.jsx("aside",{className:"md:col-span-1",children:e.jsx(L,{filters:a,setFilters:i,aplicarFiltros:p})})]})}export{E as default};
